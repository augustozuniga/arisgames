<cruisecontrol>
    <project name="connectfour">

        <listeners>
            <currentbuildstatuslistener file="logs/${project.name}/status.txt"/>
        </listeners>

        <bootstrappers>
            <antbootstrapper anthome="apache-ant-1.7.0" buildfile="projects/${project.name}/build.xml" target="clean" />
        </bootstrappers>

        <modificationset quietperiod="30">
            <!-- touch any file in connectfour project to trigger a build -->
            <filesystem folder="projects/${project.name}"/>
        </modificationset>

        <schedule interval="300">
            <ant anthome="apache-ant-1.7.0" buildfile="projects/${project.name}/build.xml"/>
        </schedule>

        <log>
            <merge dir="projects/${project.name}/target/test-results"/>
        </log>

        <publishers>
            <onsuccess>
                <artifactspublisher dest="artifacts/${project.name}" file="projects/${project.name}/target/${project.name}.jar"/>
            </onsuccess>
        </publishers>

    </project>
    
	<project name="helloworld" buildafterfailed="false">
		<plugin name="svn"
          classname="net.sourceforge.cruisecontrol.sourcecontrols.SVN" />
		
		<modificationset quietperiod="60">
			<svn localWorkingCopy="projects/${project.name}/source/"/>
		</modificationset>

        <schedule interval="200">
            <ant anthome="apache-ant-1.7.0" buildfile="projects/${project.name}/build.xml"/>
        </schedule>
        
		<listeners>
			<currentbuildstatuslistener file="logs/${project.name}/status.txt"/>
		</listeners>
		  
		<log dir="logs/${project.name}">
			<merge dir="projects/${project.name}/build/logs/"/>
		</log>
		
		 <publishers>
		  <currentbuildstatuspublisher file="logs/${project.name}/buildstatus.txt"/>
		  <!-- copy log file -->
		   <artifactspublisher file="projects/${project.name}/log.xml" 
                          dest="artifacts/${project.name}" />
		</publishers>
	</project>
</cruisecontrol>
